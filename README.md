# n8n Localtunnel Setup

ğŸš€ **Easily expose your local n8n instance to the internet using localtunnel**

This project provides an automated setup script that:
- âœ… Starts n8n in Docker
- âœ… Creates a public tunnel URL using [localtunnel](https://github.com/localtunnel/localtunnel)
- âœ… Automatically configures n8n with the tunnel URL
- âœ… Generates secure passwords
- âœ… Handles automatic reconnection if tunnel disconnects

Perfect for:
- ğŸŒ Testing webhooks with external services (Twilio, Stripe, etc.)
- ğŸ”— Sharing your n8n instance temporarily
- ğŸ§ª Browser testing tools integration
- ğŸ“± Mobile app development with webhook callbacks

## ğŸ“‹ Prerequisites

Before you begin, ensure you have the following installed:

- **Docker** - [Install Docker](https://docs.docker.com/get-docker/)
- **Docker Compose** - Usually included with Docker Desktop
- **Node.js** (v14 or higher) - [Install Node.js](https://nodejs.org/)
- **npm** - Comes with Node.js
- **curl** or **wget** - Usually pre-installed on macOS/Linux

## ğŸš€ Quick Start

### 1. Clone or Download

```bash
git clone <your-repo-url>
cd "Automation n8n"
```

Or download and extract the project files.

### 2. Install Dependencies

```bash
npm install
```

This will install `localtunnel` as a dependency.

### 3. Run the Setup Script

```bash
./start.sh
```

That's it! The script will:
1. Check all dependencies
2. Generate a secure password for n8n
3. Start n8n in Docker
4. Create a public tunnel URL
5. Configure n8n with the tunnel URL
6. Display all connection information

## ğŸ“– Usage

### Starting n8n with Tunnel

Simply run:

```bash
./start.sh
```

The script will output:
- ğŸŒ **Public Tunnel URL** - Share this URL to access your n8n instance from anywhere
- ğŸ  **Local URL** - Access n8n locally at `http://localhost:5678`
- ğŸ‘¤ **Username** - Default: `admin`
- ğŸ”‘ **Password** - Auto-generated secure password (saved to `.n8n_password`)

### Stopping the Tunnel

Press `Ctrl+C` in the terminal where the script is running. This will:
- Close the tunnel connection
- Keep n8n running in Docker (you can restart the tunnel later)

### Stopping Everything

To stop both the tunnel and n8n:

```bash
docker-compose down
```

### Restarting the Tunnel

If you need to restart just the tunnel (n8n keeps running):

```bash
./start.sh
```

The script will detect the running container and create a new tunnel.

## ğŸ”§ Configuration

### Port Configuration

By default, n8n runs on port `5678`. To change this, edit `start.sh`:

```bash
N8N_PORT=5678
LOCAL_PORT=5678
```

And update `docker-compose.yml`:

```yaml
ports:
  - "5678:5678"  # Change both numbers to your desired port
```

### Custom Subdomain

To request a specific subdomain (if available), you can modify the tunnel creation in `start.sh`:

```javascript
const tunnel = await localtunnel({ 
  port: port,
  subdomain: 'my-custom-name'  // Optional: request specific subdomain
});
```

**Note:** Subdomains may not always be available.

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ start.sh                 # Main setup script
â”œâ”€â”€ docker-compose.yml       # Docker Compose configuration for n8n
â”œâ”€â”€ package.json             # Node.js dependencies
â”œâ”€â”€ README.md               # This file
â”œâ”€â”€ .gitignore              # Git ignore rules
â”œâ”€â”€ .n8n_password           # Generated n8n password (auto-created)
â”œâ”€â”€ .localtunnel_password   # Tunnel password (auto-created)
â””â”€â”€ .tunnel_url             # Current tunnel URL (auto-created)
```

## ğŸ” Security

### Password Management

- **n8n Password**: Generated automatically and saved to `.n8n_password`
- **Tunnel Password**: Retrieved from localtunnel service and saved to `.localtunnel_password`
- Both password files are excluded from git (see `.gitignore`)

### Important Security Notes

âš ï¸ **Warning**: The public tunnel URL is accessible to anyone who has it. Make sure to:
- Use a strong password (auto-generated by default)
- Don't share your tunnel URL publicly
- Close the tunnel when not in use
- Be aware that localtunnel.me is a public service

### Basic Authentication

The script automatically enables basic authentication for n8n:
- Username: `admin`
- Password: Auto-generated (saved in `.n8n_password`)

## ğŸ› Troubleshooting

### Tunnel Shows "503 - Tunnel Unavailable"

This usually means the tunnel connection was lost. The script includes automatic reconnection, but if it persists:

1. Stop the script (`Ctrl+C`)
2. Kill any existing tunnel processes:
   ```bash
   pkill -f "localtunnel"
   ```
3. Restart: `./start.sh`

### n8n Container Won't Start

Check Docker is running:
```bash
docker ps
```

View n8n logs:
```bash
docker-compose logs n8n
```

### Tunnel Password Not Available

The tunnel password is only available when a tunnel is active. You can:
- Check `.localtunnel_password` file
- Visit `https://loca.lt/mytunnelpassword` in your browser
- Run: `curl https://loca.lt/mytunnelpassword`

### Port Already in Use

If port 5678 is already in use:

1. Find what's using it:
   ```bash
   lsof -i :5678
   ```
2. Stop the process or change the port in `start.sh` and `docker-compose.yml`

### Permission Denied on start.sh

Make the script executable:
```bash
chmod +x start.sh
```

## ğŸ“ How It Works

1. **Dependency Check**: Verifies Docker, Node.js, and npm are installed
2. **Package Installation**: Installs localtunnel if not already installed
3. **Password Generation**: Creates or loads n8n password
4. **Docker Setup**: Starts n8n container using docker-compose
5. **Tunnel Creation**: Creates a public tunnel using localtunnel API
6. **Configuration Update**: Updates docker-compose.yml with tunnel URL
7. **Auto-Reconnection**: Monitors tunnel and reconnects if disconnected

## ğŸ”„ Tunnel Reconnection

The script includes automatic reconnection logic:
- If the tunnel disconnects, it automatically attempts to reconnect
- Up to 10 reconnection attempts
- New tunnel URL is saved automatically
- n8n configuration is updated with the new URL

## ğŸŒ Localtunnel Information

This project uses [localtunnel](https://github.com/localtunnel/localtunnel), an open-source tool that:
- Exposes localhost to the internet
- Provides HTTPS URLs
- Requires no account or signup
- Is free to use

**Default Host**: `https://localtunnel.me`

## ğŸ“š Additional Resources

- [n8n Documentation](https://docs.n8n.io/)
- [Localtunnel GitHub](https://github.com/localtunnel/localtunnel)
- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“„ License

This project is open source and available under the [MIT License](LICENSE).

## âš ï¸ Disclaimer

This tool is provided as-is for development and testing purposes. The public tunnel URL is accessible to anyone who has it. Use at your own risk and ensure you follow security best practices.

## ğŸ’¡ Tips

- **Save your tunnel URL**: The tunnel URL is saved to `.tunnel_url` for easy reference
- **Check logs**: Tunnel logs are available at `/tmp/tunnel.log`
- **Multiple instances**: You can run multiple tunnels on different ports
- **Webhook testing**: Perfect for testing webhooks from services like Twilio, Stripe, etc.

## ğŸ†˜ Support

If you encounter issues:
1. Check the [Troubleshooting](#-troubleshooting) section
2. Review the tunnel logs: `tail -f /tmp/tunnel.log`
3. Check n8n logs: `docker-compose logs n8n`
4. Open an issue on GitHub

---

**Made with â¤ï¸ for the n8n community**

